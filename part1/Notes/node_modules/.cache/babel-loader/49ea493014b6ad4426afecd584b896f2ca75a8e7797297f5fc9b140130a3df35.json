{"ast":null,"code":"'use strict';\n\nconst Action = require('./Action');\nconst {\n  Status,\n  Events\n} = require('../../util/Constants');\nclass GuildMemberUpdateAction extends Action {\n  handle(data, shard) {\n    const {\n      client\n    } = this;\n    if (data.user.username) {\n      const user = client.users.cache.get(data.user.id);\n      if (!user) {\n        client.users.add(data.user);\n      } else if (!user.equals(data.user)) {\n        client.actions.UserUpdate.handle(data.user);\n      }\n    }\n    const guild = client.guilds.cache.get(data.guild_id);\n    if (guild) {\n      const member = this.getMember({\n        user: data.user\n      }, guild);\n      if (member) {\n        const old = member._update(data);\n        /**\n         * Emitted whenever a guild member changes - i.e. new role, removed role, nickname.\n         * Also emitted when the user's details (e.g. username) change.\n         * @event Client#guildMemberUpdate\n         * @param {GuildMember} oldMember The member before the update\n         * @param {GuildMember} newMember The member after the update\n         */\n        if (shard.status === Status.READY) client.emit(Events.GUILD_MEMBER_UPDATE, old, member);\n      } else {\n        const newMember = guild.members.add(data);\n        /**\n         * Emitted whenever a member becomes available in a large guild.\n         * @event Client#guildMemberAvailable\n         * @param {GuildMember} member The member that became available\n         */\n        this.client.emit(Events.GUILD_MEMBER_AVAILABLE, newMember);\n      }\n    }\n  }\n}\nmodule.exports = GuildMemberUpdateAction;","map":{"version":3,"names":["Action","require","Status","Events","GuildMemberUpdateAction","handle","data","shard","client","user","username","users","cache","get","id","add","equals","actions","UserUpdate","guild","guilds","guild_id","member","getMember","old","_update","status","READY","emit","GUILD_MEMBER_UPDATE","newMember","members","GUILD_MEMBER_AVAILABLE","module","exports"],"sources":["/Users/jessegill/node_modules/discord.js/src/client/actions/GuildMemberUpdate.js"],"sourcesContent":["'use strict';\n\nconst Action = require('./Action');\nconst { Status, Events } = require('../../util/Constants');\n\nclass GuildMemberUpdateAction extends Action {\n  handle(data, shard) {\n    const { client } = this;\n    if (data.user.username) {\n      const user = client.users.cache.get(data.user.id);\n      if (!user) {\n        client.users.add(data.user);\n      } else if (!user.equals(data.user)) {\n        client.actions.UserUpdate.handle(data.user);\n      }\n    }\n\n    const guild = client.guilds.cache.get(data.guild_id);\n    if (guild) {\n      const member = this.getMember({ user: data.user }, guild);\n      if (member) {\n        const old = member._update(data);\n        /**\n         * Emitted whenever a guild member changes - i.e. new role, removed role, nickname.\n         * Also emitted when the user's details (e.g. username) change.\n         * @event Client#guildMemberUpdate\n         * @param {GuildMember} oldMember The member before the update\n         * @param {GuildMember} newMember The member after the update\n         */\n        if (shard.status === Status.READY) client.emit(Events.GUILD_MEMBER_UPDATE, old, member);\n      } else {\n        const newMember = guild.members.add(data);\n        /**\n         * Emitted whenever a member becomes available in a large guild.\n         * @event Client#guildMemberAvailable\n         * @param {GuildMember} member The member that became available\n         */\n        this.client.emit(Events.GUILD_MEMBER_AVAILABLE, newMember);\n      }\n    }\n  }\n}\n\nmodule.exports = GuildMemberUpdateAction;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,MAAM,GAAGC,OAAO,CAAC,UAAU,CAAC;AAClC,MAAM;EAAEC,MAAM;EAAEC;AAAO,CAAC,GAAGF,OAAO,CAAC,sBAAsB,CAAC;AAE1D,MAAMG,uBAAuB,SAASJ,MAAM,CAAC;EAC3CK,MAAM,CAACC,IAAI,EAAEC,KAAK,EAAE;IAClB,MAAM;MAAEC;IAAO,CAAC,GAAG,IAAI;IACvB,IAAIF,IAAI,CAACG,IAAI,CAACC,QAAQ,EAAE;MACtB,MAAMD,IAAI,GAAGD,MAAM,CAACG,KAAK,CAACC,KAAK,CAACC,GAAG,CAACP,IAAI,CAACG,IAAI,CAACK,EAAE,CAAC;MACjD,IAAI,CAACL,IAAI,EAAE;QACTD,MAAM,CAACG,KAAK,CAACI,GAAG,CAACT,IAAI,CAACG,IAAI,CAAC;MAC7B,CAAC,MAAM,IAAI,CAACA,IAAI,CAACO,MAAM,CAACV,IAAI,CAACG,IAAI,CAAC,EAAE;QAClCD,MAAM,CAACS,OAAO,CAACC,UAAU,CAACb,MAAM,CAACC,IAAI,CAACG,IAAI,CAAC;MAC7C;IACF;IAEA,MAAMU,KAAK,GAAGX,MAAM,CAACY,MAAM,CAACR,KAAK,CAACC,GAAG,CAACP,IAAI,CAACe,QAAQ,CAAC;IACpD,IAAIF,KAAK,EAAE;MACT,MAAMG,MAAM,GAAG,IAAI,CAACC,SAAS,CAAC;QAAEd,IAAI,EAAEH,IAAI,CAACG;MAAK,CAAC,EAAEU,KAAK,CAAC;MACzD,IAAIG,MAAM,EAAE;QACV,MAAME,GAAG,GAAGF,MAAM,CAACG,OAAO,CAACnB,IAAI,CAAC;QAChC;AACR;AACA;AACA;AACA;AACA;AACA;QACQ,IAAIC,KAAK,CAACmB,MAAM,KAAKxB,MAAM,CAACyB,KAAK,EAAEnB,MAAM,CAACoB,IAAI,CAACzB,MAAM,CAAC0B,mBAAmB,EAAEL,GAAG,EAAEF,MAAM,CAAC;MACzF,CAAC,MAAM;QACL,MAAMQ,SAAS,GAAGX,KAAK,CAACY,OAAO,CAAChB,GAAG,CAACT,IAAI,CAAC;QACzC;AACR;AACA;AACA;AACA;QACQ,IAAI,CAACE,MAAM,CAACoB,IAAI,CAACzB,MAAM,CAAC6B,sBAAsB,EAAEF,SAAS,CAAC;MAC5D;IACF;EACF;AACF;AAEAG,MAAM,CAACC,OAAO,GAAG9B,uBAAuB"},"metadata":{},"sourceType":"script","externalDependencies":[]}